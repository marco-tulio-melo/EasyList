{"code":"!function(t){var e={};function n(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=1)}([function(t,e){throw new Error(\"Module parse failed: Identifier 'page' has already been declared (99:18)\\nYou may need an appropriate loader to handle this file type.\\n| \\r\\n|             case objectMenu.record:\\r\\n>             const page=objectMenu.homePage.offsetLeft;\\r\\n|             console.log(page);\\r\\n|                 //Transitions.showHiddenAll(objectMenu.recordPage, pages);\\r\")},function(t,e,n){\"use strict\";n.r(e);let s=document.querySelector.bind(document),a=document.querySelectorAll.bind(document);const i=s(\"#js-modal-spinner\");class o{constructor(){throw new Error(\"Unable to Instantiate Transitions\")}static add(t,...e){const n=this.converter(e);Array.isArray(n)?n.forEach(e=>{e.classList.add(t)}):n.classList.add(t)}static remove(t,...e){const n=this.converter(e);Array.isArray(n)?n.forEach(e=>{e.classList.remove(t)}):n.classList.remove(t)}static contains(t,e){return this.converter(e).classList.contains(t)}static showHiddenToggle(...t){t.forEach(t=>{const e=this.converter(t);e.classList.contains(\"none\")?this.remove(\"none\",e):this.add(\"none\",e)})}static converter(t){const e=String(t).substring(0,1);return\"#\"===e||\".\"===e?s(t):t}static showHiddenAll(t,e){const n=(t,e)=>{const n=this.converter(t),s=this.converter(e);this.add(\"none\",s),this.remove(\"none\",n)};Array.isArray(e)?e.forEach(e=>{n(t,e)}):n(t,e)}static showHiddenAll(t,e){const n=(t,e)=>{const n=this.converter(t),s=this.converter(e);this.add(\"none\",s),this.remove(\"none\",n)};Array.isArray(e)?e.forEach(e=>{n(t,e)}):n(t,e)}static addIsRemove(t,e,...n){const s=this.converter(t);n.forEach(t=>{this.remove(t,s)}),this.add(e,s)}static fade(t,...e){[...e].forEach(e=>{\"in\"===t?(this.contains(\"fade-out\",e)||this.contains(\"opacity\",e))&&this.addIsRemove(e,\"fade-in\",\"fade-out\",\"opacity\"):\"out\"===t&&(this.contains(\"fade-in\",e)||this.contains(\"opacity\",e))&&this.addIsRemove(e,\"fade-out\",\"fade-in\",\"opacity\")})}static spinner(t){t?setTimeout(()=>{this.remove(\"none\",i)},50):setTimeout(()=>{this.add(\"none\",i)},500)}}class r{constructor(t,e){this.connection=t,this.store=e}add(t){return new Promise(e=>{(async()=>{(await this.request(this.connection,this.store)).add(t),e()})()})}read(){return new Promise(t=>{(async()=>{(await this.request(this.connection,this.store)).getAll().onsuccess=(e=>{t(e.target.result)})})()})}request(t,e){return new Promise((n,s)=>{n(t.transaction([e],\"readwrite\").objectStore(e))})}}class c extends r{constructor(t){super(t,\"itemDb\")}clearUnit(){return new Promise((t,e)=>{(async()=>{(await this.request(this.connection,this.store)).openCursor().onsuccess=(e=>{let n=e.target.result;if(n){let t=n.value;t.unit=0,n.update(t),n.continue()}else t()})})()})}edit(t,e){return new Promise(n=>{(async()=>{(await this.request(this.connection,this.store)).openCursor().onsuccess=(n=>{let s=n.target.result;if(s){let n=s.value;if(n.name===t.name&&n.category===t.category)return n=e,s.update(n),!0;s.continue()}}),n()})()})}delete(t,e){return new Promise((n,s)=>{(async()=>{(await this.request(this.connection,this.store)).openCursor().onsuccess=(s=>{let a=s.target.result;if(a){let n=a.value;n.name===t&&n.category===e&&a.delete(n),a.continue()}else n()})})()})}}class l extends r{constructor(t){super(t,\"listsDb\")}rename(t,e){return new Promise((n,s)=>{(async()=>{(await this.request(this.connection,this.store)).openCursor().onsuccess=(s=>{let a=s.target.result;if(a){let n=a.value;n.name===t&&(n.name=e,a.update(n)),a.continue()}else n()})})()})}update(t,e){return new Promise(n=>{(async()=>{(await this.request(this.connection,this.store)).openCursor().onsuccess=(s=>{let a=s.target.result;if(a){let n=a.value;n.name===t&&(n.items=e,n.qtdItems=e.length,a.update(n)),a.continue()}else n()})})()})}delete(t){return new Promise(e=>{(async()=>{(await this.request(this.connection,this.store)).openCursor().onsuccess=(n=>{let s=n.target.result;if(\"listsDb\"===this.store)if(s){let e=s.value;e.name===t&&s.delete(e),s.continue()}else e(\"Deleted item from \"+this.store)})})()})}}class d{constructor(t){this._element=t}update(t){this._element.innerHTML=null===t?\"\":this.template(t)}}const u=new class extends d{constructor(t){super(t)}template(t){return t.map(t=>`              \\n        <li class=\"list-ready__list row\">\\n\\n                 <div class=\"list-ready__list-box row\">\\n        \\n                    <div class=\"list-ready__list-modal column\">\\n\\n                        <div class=\"list-ready__list-name row\">\\n                            <h1 class=\"list-name-text\">${t.name}</h1>\\n                        </div>\\n\\n                        <div class=\"list-ready__list-date row\">\\n                            <h2>Data: ${t.date}</h2>\\n                            <h2>Itens:${t.qtdItems}</h2>\\n                        </div>\\n\\n                    </div>\\n                </div>\\n                </li>`).join(\"\")}}(s(\"#js-list-full\"));function m(){return u}Object.freeze(u);class p{constructor(t,e,n,s,a,i){this._name=t,this._qtd=e,this._measure=n,this._unit=s,this._category=a,this._price=i}get name(){return this._name}get qtd(){return this._qtd}get measure(){return this._measure}get unit(){return this._unit}get category(){return this._category}get price(){return this._price}}const h=[\"listsDb\",\"itemDb\",\"recordDb\"],g=1,v=\"easyList\";var w=null,f=null;class _{constructor(){throw new Error(\"Unable to Instantiate ConnectionFactory\")}static getConnection(){return new Promise((t,e)=>{let n=window.indexedDB.open(v,g);n.onupgradeneeded=(t=>{h.forEach(e=>{t.target.result.createObjectStore(e,{autoIncrement:!0})})}),n.onsuccess=(e=>{w||(w=e.target.result,f=w.close.bind(w),w.close=(()=>{throw new Error(\"You can not close the connection..\")})),t(w)}),n.onerror=(t=>{e(t.target.error.name)})})}static closeConnection(){w&&(f(),w=null)}}class y{constructor(){throw new Error(\"Unable to Instantiate FormatCharacter\")}static capitalize(t,e){const n=t.substring(0,e);return n.substring(0,1).toUpperCase()+n.substring(1).toLowerCase()}static limit(t,e){const n=e.charCode?e.charCode:e.keyCode;if(8!=n&&9!=n){const e=t;let s=inputs.qtd;if(n<48||n>57||s.value.length>=e)return s.value=s.value.substr(0,t),!1}}}const C=new class extends d{constructor(t){super(t)}template(t){return t.map(t=>`\\n        <div class=\"list__items-category\">\\n        <h1>${t.name}</h1>\\n        <ul class=\"list__items column\">\\n            \\x3c!--Itens--\\x3e\\n               ${t.itemsCategory.map(t=>`\\n               <li class=\"list__item row\">\\n                <span class=\"list__item-name\">${t.name}</span>\\n                <div class=\"list__qtd row\">\\n                    <span class=\"qtd\">${t.qtd}</span><span class=\"measure\">${t.measure}</span>\\n                </div>\\n                \\x3c!--Change amount--\\x3e\\n                <div class=\"change-amount row\">\\n                    <a class=\"amount minus icon-amount change-buttons minus-button opacity\"></a>\\n                        <span  class=\"change-amount-span unit opacity \">${t.unit}</span>\\n                    <a class=\"amount plus icon-amount change-buttons plus-button\"></a>\\n                </div>`).join(\"\")}\\n                </li> \\n            </ul>\\n            </div>`).join(\"\")}}(s(\"#js-list\"));function b(){return C}Object.freeze(C);class x{constructor(t,e){this._name=t,this._itemsCategory=e}get name(){return this._name}get itemsCategory(){return this._itemsCategory}}class S{constructor(){throw new Error(\"Unable to Instantiate UnitHelper\")}static prompt(t,e,n){navigator.notification.prompt(t,e,n,[\"Adicionar\",\"Cancelar\"],\"\")}static alert(t,e,n){navigator.notification.alert(t,e,n,\"Ok\")}static confirm(t,e,n,s,a){navigator.notification.confirm(t,e,n,[s,a])}}class j{constructor(){throw new Error(\"Unable to Instantiate ValidationNames\")}static validation(t,e,n,s){let a=null,i=null,o=null,r=!1,c=!1,l=!1;if(\"item\"===n&&(a=y.capitalize(t.name,16),i=t.category,o=a.length,e.filter(t=>{if(t.name===a&&t.category===i)return l=!0}),o>3&&!l?r=1:o>3&&l?r=5:o>0&&o<=3&&(r=6),c=!0),\"list\"!==n&&\"category\"!==n||(o=(a=y.capitalize(t.input1,16)).length,e.filter(t=>{if(\"list\"===n){if(t.name===a)return l=!0}else if(\"category\"===n&&t===a)return l=!0}),o>3&&!l?r=1:o>3&&l?r=2:o>0&&o<=3?r=3:\"\"===a&&(r=4)),1===t.buttonIndex||c)switch(r){case 1:s(a);break;case 2:S.prompt(\"O nome já existe, insira um novo.\",t=>{this.validation(t,e,n,s)},\"Salvar\");break;case 3:S.prompt(\"O nome deve conter mais de 3 caracteres.\",t=>{this.validation(t,e,n,s)},\"Salvar\");break;case 4:S.prompt(\"O nome não pode estar em branco.\",t=>{this.validation(t,e,n,s)},\"Salvar\");break;case 5:S.alert(\"O nome já existe, insira um novo.\",t=>{this.validation(t,e,n,s)},\"Salvar\");break;case 6:S.alert(\"O nome deve conter mais de 3 caracteres.\",t=>{this.validation(t,e,n,s)},\"Salvar\")}}}class I{constructor(){throw new Error(\"Unable to Instantiate CategoryFactory\")}static mountsCategories(t){let e=[],n=[],s=null,a=null,i=null,o=null;return(e=this._removeDuplicates(t)).sort(),e.map(e=>{a=t.filter(t=>t.category===e),i=new x(e,a),s={name:i.name,itemsCategory:i.itemsCategory},n.push(s)}),o={nameCategories:e,categories:n}}static add(t){S.prompt(\"Nome da categoria:\",e=>{this._validationCategory(e,t)},\"Adicionar categoria\")}static _validationCategory(t,e){let n=null;(async()=>{const s=await _.getConnection().then(t=>new c(t).read());n=this.mountsCategories(s).nameCategories;j.validation(t,n,\"category\",(t=>{const n=document.createElement(\"option\");n.text=t,e.add(n,e[0]),e.selectedIndex=\"0\"}).bind(this))})()}static _removeDuplicates(t){const e=[];return t.forEach(t=>{e.includes(t.category)||e.push(t.category)}),e}}class E{constructor(){throw new Error(\"Unable to Instantiate FormatCoin\")}static coin(t,e,n,s,a){a.preventDefault();let i=\"\",o=0,r=o,c=0,l=c,d=\"\",u=d,m=window.Event?a.which:a.keyCode;if(e===t.value&&(t.value=\"\"),13===m||8===m)return!0;if(i=String.fromCharCode(m),-1===\"0123456789\".indexOf(i))return!1;for(l=t.value.length,r=0;r<l&&(\"0\"==t.value.charAt(r)||t.value.charAt(r)==s);r++);for(u=\"\";r<l;r++)-1!=\"0123456789\".indexOf(t.value.charAt(r))&&(u+=t.value.charAt(r));if(0===(l=(u+=i).length))t.value=\"\";else if(1===l)t.value=\"0\"+s+\"0\"+u;else if(2===l)t.value=\"0\"+s+u;else if(l>2&&l<6){for(d=\"\",o=0,r=l-3;r>=0;r--)3==o&&(d+=n,o=0),d+=u.charAt(r),o++;for(t.value=\"\",r=(c=d.length)-1;r>=0;r--)t.value+=d.charAt(r);return t.value+=s+u.substr(l-2,l),!1}}static price(t){let e=t.replace(\",\",\".\");return parseFloat(e)}}class q{constructor(){throw new Error(\"Unable to Instantiate Support\")}static supportLists(t){const e=t.target.closest(\".list-ready__list\"),n=e.querySelector(\".list-ready__list-modal\"),s=e.querySelector(\".list-name-text\").textContent;return{target:e,element:n,name:s}}static supportItems(t){const e=t.currentTarget,n=e.closest(\".list__item\"),s=e.closest(\".list__items-category\");return{target:e,name:n.querySelector(\".list__item-name\").textContent,qtd:n.querySelector(\".qtd\").textContent,measure:n.querySelector(\".measure\").textContent,unit:n.querySelector(\".unit\").textContent,category:s.querySelector(\"h1\").textContent}}static supportUnit(t){const e=t.target,n=e.closest(\"div\"),s=e.closest(\".list__items-category\"),a=s.querySelector(\"h1\").textContent,i=s.querySelector(\".qtd\").textContent,o=s.querySelector(\".measure\").textContent,r=e.closest(\".change-amount\"),c=r.querySelector(\".minus-button\"),l=r.querySelector(\".plus-button\"),d=r.querySelector(\"span\"),u=r.closest(\".list__item\"),m=u.querySelector(\".list__item-name\").textContent;return{target:e,box:n,boxItem:s,categoryName:a,qtdItem:i,measureItem:o,blockUnit:r,buttonMinus:c,buttonPlus:l,unit:d,blockItem:u,itemName:m}}static supportShop(t){const e=t.currentTarget,n=s(\"#js-title-shop\").textContent,a=e.closest(\".list__items-category\"),i=e.querySelector(\".list__item-name-shop\"),o=e.querySelector(\".qtd\"),r=e.querySelector(\".measure\"),c=e.querySelector(\".unit\"),l=a.querySelector(\"h1\"),d=e.querySelector(\".list__price-shop\"),u=d.querySelector(\".priceText\");return{target:e,listName:n,name:i,qtd:o,measure:r,unit:c,category:l,priceBlock:d,price:u,model:{name:i.textContent,qtd:o.textContent,measure:r.textContent,unit:parseInt(c.textContent),category:l.textContent,price:(E.price(u.textContent)/parseInt(c.textContent)).toFixed(2),total:u.textContent}}}}const L=new class{constructor(t){this._element=t}modelSheets(t){return`<div class=\"modal__model column\">\\n        <h1>${t.name}</h1>\\n        <div class=\"modal__model-main column\">\\n         ${this._buttons(t)}\\n        </div>\\n    </div>`}_buttons(t){return t.button.map(t=>`\\n         <button class=\"modal__options\" id=\"js-modal${t}\">${t}</button>\\n         `).join(\"\")}modelPrice(t){return`\\n        <div class=\"modal__model-shop column\">\\n            <div class=\"modal__model-border row\">\\n                <span>${t.name} - ${t.qtd} ${t.measure} - ${t.unit} unidade </span>\\n            </div>\\n            <div class=\"modal__model-main-shop row\">\\n                <div class=\"modal__price row\">\\n                    <span>R$</span>\\n                </div>\\n                \\n                <input type=\"number\" placeholder=\"00,00\" value=\"${t.price}\" id=\"js-price\" />\\n                <div class=\"modal__next  row\">\\n                    <button  class=\"icon-medium filter\" id=\"js-save-price\"></button>\\n                </div>\\n                \\n            </div>\\n            <div class=\"modal__model-border row\">\\n                <span>Total:&nbsp R$ &nbsp </span><span id=\"js-total\">${t.total}</span>\\n            </div>\\n        </div>`}template(t,e){if(\"modelSheets\"===t)return this.modelSheets(e);if(\"modelPrice\"===t)return this.modelPrice(e);throw new Error('Tipo de modal invalido - Tente, \"modelSheets\" ou \"modelPrice\"')}update(t,e){this._element.innerHTML=null===t?\"\":this.template(t,e)}}(s(\"#js-modal\"));Object.freeze(L);const k=L,A=s(\"#js-modal\");class P{constructor(){throw new Error(\"Unable to Instantiate UnitHelper\")}static mounts(t,e){o.remove(\"none\",A),k.update(t,e)}static disappear(){o.add(\"none\",A),k.update(null)}}const T=s(\"#js-page-shopping\"),U=s(\"#js-page-list\");class D{constructor(){throw new Error(\"Unable to Instantiate Sticky\")}static fixed(t){let e=0,n=null,s=[];\"list\"===t?(e=U.querySelector(\".header-list\").offsetHeight,n=U.querySelectorAll(\".list__items-category\")):\"shop\"===t&&(e=T.querySelector(\".header-list\").offsetHeight,n=T.querySelectorAll(\".list__items-category\")),n.forEach(t=>{let n=t.offsetTop-2*e,a=t.offsetHeight+n,i=t.querySelector(\"h1\");s.push([n,a,i])});let a=s[0];o.add(\"fixed\",a[2]),tt.listenSticky(s)}}let $;const H=s(\"#js-page-shopping\"),M=s(\"#js-page-index\"),N=s(\"#js-title-shop\");class O{constructor(){throw new Error(\"Unable to Instantiate ListsController\")}static open(t){(async()=>{const e=q.supportLists(t).name,n=await kt.renderShop(e);N.textContent=n,o.showHiddenAll(H,M),D.fixed(\"shop\"),tt.listenerShop()})()}static start(t){const e=q.supportLists(t);O.end(),$=setTimeout(()=>{navigator.vibrate(100);const t={name:e.name,button:[\"Editar\",\"Renomear\",\"Excluir\"]};P.mounts(\"modelSheets\",t),tt.listenerModalList(e)},1e3)}static end(){clearTimeout($)}static delete(t,e){e.preventDefault(),P.disappear();const n=`Deseja excluir ${t.name} permanentemente?`;S.confirm(n,e=>{(e=>{1==e&&(o.add(\"fade-out\",t.target),setTimeout(()=>{(async()=>{(await _.getConnection().then(t=>new l(t).read())).some(e=>{if(e.name===t.name)return(async()=>{await _.getConnection().then(t=>new l(t).delete(e.name))})(),!0}),kt.renderLists()})()},500))})(e)},\"Excluir lista:\",\"Ok\",\"Cancelar\")}static rename(t,e){e.preventDefault(),P.disappear();const n=e=>{1===e.buttonIndex&&(async()=>{const n=await _.getConnection().then(t=>new l(t).read());j.validation(e,n,\"list\",(e=>{_.getConnection().then(n=>new l(n).rename(t.name,e)),kt.renderLists()}).bind(this))})()};S.prompt(\"Novo nome:\",t=>{n(t)},\"Renomear lista\")}}class R extends r{constructor(t){super(t,\"recordDb\")}delete(){return new Promise(t=>{(async()=>{(await this.request(this.connection,this.store)).openCursor().onsuccess=(e=>{let n=e.target.result;if(n){let t=n.value;n.delete(t),n.continue()}else t(\"Deleted item from \"+this.store)})})()})}}class z{constructor(){throw new Error(\"Unable to Instantiate RecordFactory\")}static add(t){(async()=>{_.getConnection().then(e=>new R(e).add(t))})()}}class F{constructor(){throw new Error(\"Unable to Instantiate FormatDate\")}static date(){const t=new Date;let e=[t.getDate(),t.getMonth()+1,t.getFullYear(),t.getHours(),t.getMinutes()];return e.forEach((t,n)=>{t<=9&&e.splice(n,1,\"0\"+t)}),`${e[0]}/${e[1]}/${e[2]} - ${e[3]}:${e[4]}`}}let B=null,V=null;const Y=s(\"#js-page-index\"),K=s(\"#js-page-shopping\");class Q{constructor(){throw new Error(\"Unable to Instantiate ShopController\")}static open(t){const e=q.supportShop(t);P.mounts(\"modelPrice\",e.model),tt.listenerModalShopPrice(e,t),Q.input(e,t),(V=s(\"#js-price\")).focus(),Q.priceTotal(e.listName)}static start(t){const e=q.supportShop(t);Q.end(),B=setTimeout(()=>{navigator.vibrate(100);const n={name:e.model.name,button:[\"Editar\",\"Excluir\"]};P.mounts(\"modelSheets\",n),tt.listenerModalShop(e,t)},1e3)}static end(){clearTimeout(B)}static delete(t,e){e.preventDefault();1===Array.prototype.slice.call(a(\".list__item-shop\")).length?S.alert(\"A lista foi excluida por não conter itens.\",()=>{(async()=>{await _.getConnection().then(e=>new l(e).delete(t.listName)),await kt.renderLists(),o.showHiddenToggle(Y,K)})()},\"Aviso\"):(o.add(\"fade-out\",t.target),setTimeout(()=>{(async()=>{let e=null;(await _.getConnection().then(t=>new l(t).read())).some(n=>{n.name!==t.listName||(e=n.items).some((n,s)=>{n.name===t.model.name&&n.category===t.model.category&&e.splice(s,1)})}),await _.getConnection().then(n=>new l(n).update(t.listName,e)),Q.priceTotal(t.listName),await kt.renderShop(t.listName),D.fixed(\"shop\")})()},500))}static edit(t,e){console.log(\"Ainda não implementado - Usar o upadateitemsShop\")}static upadateitemsShop(t,e,n,s){(async()=>{const a=await _.getConnection().then(t=>new l(t).read());let i=null;a.some(a=>{a.name!==t||(i=a.items).some((t,a)=>{t.name===e&&t.category===n&&i.splice(a,1,s)})}),await _.getConnection().then(e=>new l(e).update(t,i)),Q.priceTotal(t)})()}static priceTotal(t){(async()=>{let e=0;(await _.getConnection().then(t=>new l(t).read())).some(n=>{n.name===t&&(n.items.forEach(t=>{e=E.price(t.price)+e}),s(\"#js-price-total\").textContent=e.toFixed(2))})})()}static additemsShop(t){(async()=>{const e=await _.getConnection().then(t=>new l(t).read());let n=null;e.some(e=>{e.name!==t||(n=e.items).some((t,e)=>{t.name===nameItem&&t.category===categoryItem&&n.splice(e,1,objectUpdate)})}),await _.getConnection().then(e=>new l(e).update(t,n))})()}static input(t,e){e.preventDefault();const n=s(\"#js-price\"),a=s(\"#js-total\"),i=s(\"#js-save-price\"),r=n.value;n.addEventListener(\"keypress\",e=>{E.coin(n,r,\".\",\".\",e),(()=>{if(n.value<=0||\"\"===n.value)a.textContent=\"00,00\",o.add(\"filter\",i);else{let e=t.unit.textContent,s=parseFloat(n.value*e.replace(\",\",\".\")).toFixed(2);a.textContent=s.replace(\".\",\",\"),o.remove(\"filter\",i)}})()},!1)}static save(t,e){e.preventDefault();const n=t.name.textContent,a=t.category.textContent,i=s(\"#js-total\"),r=t.price,c={category:t.category.textContent,measure:t.measure.textContent,name:t.name.textContent,price:i.textContent,qtd:t.qtd.textContent,unit:t.unit.textContent};if(Q.upadateitemsShop(t.listName,n,a,c),i.textContent<=0||\"00,00\"===i.textContent||\"\"===i.textContent)return r.textContent=i.textContent,o.add(\"none\",t.priceBlock),void o.remove(\"list__item-shop--active\",t.target);r.textContent=i.textContent,o.remove(\"none\",t.priceBlock),o.add(\"list__item-shop--active\",t.target)}static finalize(){return new Promise(t=>{let e=s(\"#js-title-shop\").textContent,n=s(\"#js-price-total\").textContent;(async()=>{const s=await _.getConnection().then(t=>new l(t).read());let a=!1,i={date:F.date(),name:e,total:n};s.some(s=>{if(s.name===e)return s.items.forEach(t=>{\"00,00\"===t.price&&(a=!0)}),\"0.00\"===n?S.alert(\"Não é possivel salvar a lista, todos os items estão sem preços.\",()=>{},\"Aviso\"):a?S.confirm(\"Ainda a items sem o preço definido. Realmente deseja finalizar a compra?.\",e=>{1===e&&(z.add(i),kt.renderRecord(),Q.clearPrice(i),t())},\"Finalizar compra\",\"Sim\",\"Não\"):S.alert(\"Compra fianlizada com sucesso.\",()=>{z.add(i),kt.renderRecord(),Q.clearPrice(i),t()},\"Parabens\"),!0})})()})}static clearPrice(t){(async()=>{(await _.getConnection().then(t=>new l(t).read())).some(e=>{e.name===t.name&&(e.items.forEach(t=>{t.price=\"00,00\"}),_.getConnection().then(t=>new l(t).update(e.name,e.items)))})})()}}const G=s(\"#js-header__save\");class J{constructor(){throw new Error(\"Unable to Instantiate Menu\")}static itemsShopEffects(){document.querySelectorAll(\".priceText\").forEach(t=>{const e=t.closest(\".list__price-shop\"),n=t.closest(\".list__item-shop\");\"00,00\"!=t.textContent||\"\"!=parseFloat(t.textContent)?(o.remove(\"none\",e),o.add(\"list__item-shop--active\",n)):(o.add(\"none\",e),o.remove(\"list__item-shop--active\",n))})}static itemEffects(){let t=null,e=null,n=null,s=null,i=null;a(\".change-amount\").forEach(a=>{t=a.querySelector(\"span\"),(e=parseInt(t.textContent))>0&&(n=a.querySelector(\".plus-button\"),s=a.closest(\".list__item\"),i=a.querySelector(\".minus-button\"),o.add(\"plus--active\",n),o.fade(\"in\",i),o.fade(\"in\",t),o.addIsRemove(s,\"list__item--in\",\"list__item--out\"))})}static SaveButtonEffects(){(async()=>{const t=await _.getConnection().then(t=>new c(t).read());console.log(t),t.some(t=>parseInt(t.unit)>=1)?(console.log(\"in\"),o.fade(\"in\",G)):(console.log(\"out\"),o.fade(\"out\",G))})()}}let W,X;class Z{constructor(){throw new Error(\"Unable to Instantiate UnitHelper\")}static unitClick(t){t.preventDefault(),Z.modifyUnit(t)}static unitStart(t){const e=t.target.tagName;navigator.vibrate(50),Z.unitEnd(),W=setTimeout(()=>{X=setInterval(()=>{\"BUTTON\"===e?Z.unitCreateItem(t):Z.modifyUnit(t)},200)},500)}static unitEnd(){clearTimeout(W),clearInterval(X)}static modifyUnit(t){(async()=>{const e=q.supportUnit(t),n=this._changeUnits(e),s={name:e.itemName,category:e.categoryName},a={name:e.itemName,qtd:e.qtdItem,measure:e.measureItem,price:\"00,00\",unit:n,category:e.categoryName};await _.getConnection().then(t=>new c(t).edit(s,a)),J.SaveButtonEffects()})()}static _changeUnits(t){let e=t.unit,n=t.unit.textContent;return t.target.classList.contains(\"minus-button\")&&(n<=1&&(o.fade(\"out\",t.buttonMinus),o.fade(\"out\",t.unit),o.addIsRemove(t.blockItem,\"list__item--out\",\"list__item--in\"),o.remove(\"plus--active\",t.buttonPlus)),n<=0?e.textContent=0:n>0&&(e.textContent=--n)),t.target.classList.contains(\"plus-button\")&&(e.textContent=n>=999?n:++n,o.fade(\"in\",t.buttonMinus),o.fade(\"in\",e),o.add(\"plus--active\",t.target),o.addIsRemove(t.blockItem,\"list__item--in\",\"list__item--out\")),e.textContent}static unitCreateItem(t){t.preventDefault();const e=t.target;let n=e.closest(\".change-amount-items\").querySelector(\"#js-span-unit\"),s=parseInt(n.textContent);o.contains(\"minus-button\",e)?s<=0?n.textContent=0:n.textContent>0&&(n.textContent=--s):o.contains(\"plus-button\",e)&&(n.textContent=s>=999?999:++s)}}class tt{constructor(){throw new Error(\"Unable to Instantiate UnitHelper\")}static listenerLists(){a(\".list-ready__list\").forEach(t=>{t.addEventListener(\"click\",O.open,!1),t.addEventListener(\"touchstart\",O.start,!1),t.addEventListener(\"touchend\",O.end,!1)})}static listenerItems(){a(\".list__item\").forEach(t=>{t.addEventListener(\"touchstart\",gt.start,{passive:!0}),t.addEventListener(\"touchend\",gt.end,{passive:!0})})}static listenerUnitItems(){a(\".amount\").forEach(t=>{t.addEventListener(\"click\",Z.unitClick.bind(this),!1),t.addEventListener(\"touchstart\",Z.unitStart.bind(this),!1),t.addEventListener(\"touchend\",Z.unitEnd.bind(this),!1)})}static listenerShop(){a(\".list__item-shop\").forEach(t=>{t.addEventListener(\"click\",Q.open,!1),t.addEventListener(\"touchstart\",Q.start,!1),t.addEventListener(\"touchend\",Q.end,!1)})}static listenerUnitCreateItem(){a(\".amount-items\").forEach(t=>{t.addEventListener(\"click\",Z.unitCreateItem.bind(this),!1),t.addEventListener(\"touchstart\",Z.unitStart.bind(this),!1),t.addEventListener(\"touchend\",Z.unitEnd.bind(this),!1)})}static listenerCustomQtd(){const t=s(\"#js-input-qtd\");t.addEventListener(\"input\",t=>{y.limit(3,t)},!1)}static listenerModal(){s(\"#js-modal\").addEventListener(\"click\",P.disappear,!1)}static listenerModalList(t){const e=s(\"#js-modalEditar\"),n=s(\"#js-modalRenomear\"),a=s(\"#js-modalExcluir\");e.addEventListener(\"click\",e=>{O.edit(t,e)},!1),n.addEventListener(\"click\",e=>{O.rename(t,e)},!1),a.addEventListener(\"click\",e=>{O.delete(t,e)},!1)}static listenerModalItems(t,e){const n=s(\"#js-modalEditar\"),a=s(\"#js-modalExcluir\");n.addEventListener(\"click\",()=>{gt.edit(t,e)},!1),a.addEventListener(\"click\",()=>{gt.delete(t,e)},!1)}static listenerModalShop(t,e){const n=s(\"#js-modalEditar\"),a=s(\"#js-modalExcluir\");n.addEventListener(\"click\",()=>{Q.edit(t,e)},!1),a.addEventListener(\"click\",()=>{Q.delete(t,e)},!1)}static listenerModalShopPrice(t){s(\"#js-save-price\").addEventListener(\"click\",e=>{Q.save(t,e)},!1)}static listenSticky(t){window.addEventListener(\"scroll\",e=>{t.forEach(t=>{window.scrollY>=t[0]&&window.scrollY<t[1]?o.add(\"fixed\",t[2]):o.remove(\"fixed\",t[2])})},!1)}}const et=new class extends d{constructor(t){super(t)}template(t){return t.map(t=>`<option value=\"${t}\">${t}</option>`).join(\"\")}}(s(\"#js-select-category\"));function nt(){return et}Object.freeze(et);let st=null;const at=nt(),it=s(\"#js-page-list\"),ot=s(\"#js-page-create-item\");let rt=s(\"#js-title-create\"),ct=s(\"#js-input-name\"),lt=s(\"#js-input-qtd\"),dt=s(\"#js-select-measure\"),ut=s(\"#js-select-category\"),mt=s(\"#js-span-unit\"),pt=null,ht=null;class gt{constructor(){throw new Error(\"Unable to Instantiate ItemsController\")}static start(t){const e=q.supportItems(t);gt.end(),st=setTimeout(()=>{navigator.vibrate(100);const n={name:e.name,button:[\"Editar\",\"Excluir\"]};P.mounts(\"modelSheets\",n),tt.listenerModalItems(e,t)},1e3)}static end(){clearTimeout(st)}static edit(t,e){e.preventDefault(),rt.textContent=\"Editar item\",ct.value=t.name,lt.value=t.qtd,dt.value=t.measure,mt.textContent=t.unit,(async()=>{const e=await _.getConnection().then(t=>new c(t).read()),n=I.mountsCategories(e);at.update(n.nameCategories),ut.value=t.category})(),o.showHiddenToggle(ot,it),pt=t.name,ht=t.category,this.loadEdit()}static loadEdit(){return{name:pt,category:ht}}static delete(t,e){e.preventDefault();1===Array.prototype.slice.call(a(\".list__item\")).length?S.alert(\"O item não pode ser excluido.\",()=>{},\"Aviso\"):(o.add(\"fade-out\",t.target),setTimeout(()=>{(async()=>{await _.getConnection().then(e=>new c(e).delete(t.name,t.category)),await kt.renderItems(!1),D.fixed(\"list\")})()},500))}}const vt=[{name:\"Achocolatado\",qtd:800,measure:\"g\",unit:0,category:\"Alimentos\",price:\"00,00\"},{name:\"Açúcar\",qtd:5,measure:\"Kg\",unit:0,category:\"Alimentos\",price:\"00,00\"},{name:\"Amido de Milho\",qtd:500,measure:\"g\",unit:0,category:\"Alimentos\",price:\"00,00\"},{name:\"Arroz\",qtd:5,measure:\"Kg\",unit:0,category:\"Alimentos\",price:\"00,00\"},{name:\"Azeite\",qtd:400,measure:\"ml\",unit:0,category:\"Alimentos\",price:\"00,00\"},{name:\"Tempero Pronto\",qtd:100,measure:\"g\",unit:0,category:\"Alimentos\",price:\"00,00\"}];class wt{constructor(){throw new Error(\"Unable to Instantiate ItemFactory\")}static init(){(async()=>{(await _.getConnection().then(t=>new c(t).read())).length<=0&&vt.forEach(t=>{_.getConnection().then(e=>new c(e).add(t))})})()}static addItems(t){_.getConnection().then(e=>new c(e).add(t))}static editItems(t){(async()=>{const e=gt.loadEdit();await _.getConnection().then(n=>new c(n).edit(e,t))})()}static create(t,e,n,s,a,i){let o=e;\"\"===o&&(o=0);const r=new p(y.capitalize(t,18),o,n,s,a,i);return{name:r.name,qtd:r.qtd,measure:r.measure,unit:r.unit,category:r.category,price:r.price}}static mountsItems(t){return new Promise(e=>{(async()=>{let n=null;t&&await _.getConnection().then(t=>new c(t).clearUnit());const s=await _.getConnection().then(t=>new c(t).read());n=I.mountsCategories(s),e(n)})()})}}const ft=new class extends d{constructor(t){super(t)}template(t){return t.map(t=>`\\n\\n        <li class=\"record-block__record column\">\\n        <div class=\"record__date row\">\\n            <span>${t.date}</span>\\n        </div>\\n\\n        <div class=\"record__data row\">\\n            <span>${t.name}</span>\\n            <span>R$  &nbsp ${t.total}</span>\\n        </div>\\n\\n    </li>`).join(\"\")}}(s(\"#js-record-page__block\"));function _t(){return ft}Object.freeze(ft);const yt=new class extends d{constructor(t){super(t)}template(t){return t.map(t=>`\\n        <div class=\"list__items-category\">\\n                                <h1>${t.name}</h1>\\n                                <ul class=\"list__items column\">\\n                                    \\x3c!--Items--\\x3e\\n                                    ${t.itemsCategory.map(t=>`\\n                                    <li class=\"list__item-shop row\">\\n                                        \\x3c!--Change amount--\\x3e\\n                                        <div class=\"change-amount-shop row\">\\n                                            <span class=\"unit\">${t.unit}</span>\\n                                        </div>\\n        \\n                                        <span class=\"list__item-name-shop name \">${t.name}</span>\\n                                        <div class=\"list__qtd-shop row\">\\n                                            <span class=\"qtd\">${t.qtd}</span><span class=\"measure\">${t.measure}</span>\\n                                        </div>\\n                                        \\n                                        <div class=\"list__price-shop row none\">\\n                                            <span>R$ \\n                                            &nbsp</span><span class=\"priceText\">${t.price}</span>\\n                                        </div>\\n                                        `).join(\"\")}\\n                                    </li>\\n                                </ul>\\n                                </div>`).join(\"\")}}(s(\"#js-list-shop\"));Object.freeze(yt);const Ct=s(\"#js-list-empty\"),bt=s(\"#js-list-full\"),xt=s(\"#js-record-box\"),St=s(\"#js-record-empty\"),jt=m(),It=yt,Et=nt(),qt=b(),Lt=_t();class kt{constructor(){throw new Error(\"Unable to Instantiate Render\")}static renderLists(){return new Promise(t=>{(async()=>{const e=await _.getConnection().then(t=>new l(t).read());e.length>0?(jt.update(e.reverse()),tt.listenerLists(),o.showHiddenAll(bt,Ct)):(jt.update(null),o.showHiddenAll(Ct,bt)),t()})()})}static renderSelect(){return new Promise(t=>{(async()=>{const e=await _.getConnection().then(t=>new c(t).read()),n=I.mountsCategories(e).nameCategories;Et.update(n),t()})()})}static renderItems(t){return new Promise(e=>{(async()=>{const n=await wt.mountsItems(t);qt.update(n.categories),tt.listenerUnitItems(),J.SaveButtonEffects(),tt.listenerItems(),J.itemEffects(),e()})()})}static renderRecord(){return new Promise(t=>{(async()=>{const e=await _.getConnection().then(t=>new R(t).read());e.length>0?(Lt.update(e),o.showHiddenAll(xt,St)):(Lt.update(null),o.showHiddenAll(St,xt)),t()})()})}static renderShop(t){return new Promise(e=>{(async()=>{(await _.getConnection().then(t=>new l(t).read())).some(e=>{if(e.name===t){const n=I.mountsCategories(e.items).categories;return It.update(n),J.itemsShopEffects(),tt.listenerShop(),Q.priceTotal(t),!0}}),e(t)})()})}}class At{constructor(t,e,n,s,a){this._name=t,this._qtdItems=e,this._date=n,this._items=s,this._categories=a}get name(){return this._name}get qtdItems(){return this._qtdItems}get date(){return this._date}get items(){return this._items}get categories(){return this._categories}}class Pt{constructor(){throw new Error(\"Unable to Instantiate ListFactory\")}static mountsList(t){return new Promise(e=>{(async()=>{const n=(await _.getConnection().then(t=>new c(t).read())).filter(t=>t.unit>0);let s=n.length;s>999&&(s=\"> 999\");const a=I.mountsCategories(n),i=this._create(t,s,F.date(),n,a.nameCategories);e(i)})()})}static _create(t,e,n,s,a){const i=new At(t,e,n,s,a);return{name:i.name,qtdItems:i.qtdItems,date:i.date,items:i.items,categories:i.categories}}}const Tt={name:s(\"#js-input-name\"),qtd:s(\"#js-input-qtd\"),unit:s(\"#js-span-unit\")};class Ut{constructor(){throw new Error(\"Unable to Instantiate  ClearData \")}static emptyInputs(){Tt.name.value=\"\",Tt.qtd.value=\"\",Tt.unit.textContent=\"1\",Tt.name.focus()}}const Dt=s(\"#js-page-index\"),$t=s(\"#js-page-list\"),Ht=s(\"#js-header__save\"),Mt=s(\"#title-page-list\").textContent;class Nt{constructor(){throw new Error(\"Unable to Instantiate Save\")}static openModalNameList(t,e){return new Promise(n=>{\"Nova Lista\"===t.textContent?S.prompt(\"Nome da lista:\",t=>{j.validation(t,e,\"list\",this.saveList.bind(this))},\"Salvar lista\"):this.saveList(t.textContent),n()})}static saveList(t){let e=t,n=null;n=\"Nova Lista\"!==Mt,(async()=>{const s=await Pt.mountsList(t),a=this._typeSave(n,e,s);S.alert(a.message,()=>{kt.renderLists(),o.showHiddenToggle($t,Dt),o.addIsRemove(Ht,\"fade-out\",\"fade-in\")},a.title)})()}static _typeSave(t,e,n){if(t){return(async()=>{await _.getConnection().then(t=>new l(t).update(e,n))})(),{message:\"Lista editada com sucesso.\",title:\"\"}}if(!t){return(async()=>{await _.getConnection().then(t=>new l(t).add(n))})(),{message:\"Lista Salva com sucesso.\",title:\"Parabéns!!!\"}}}static saveItem(t,e){return new Promise(n=>{let s=null;(async()=>{const a={name:t.name.value,category:t.category.value},i=await _.getConnection().then(t=>new c(t).read());j.validation(a,i,\"item\",(a=>{s=wt.create(t.name.value,t.qtd.value,t.measure.value,t.unit.textContent,t.category.value,t.price),\"edit\"===e?(gt.loadEdit(),wt.editItems(s)):\"create\"===e&&wt.addItems(s);const i={name:s.name,category:s.category};Ut.emptyInputs(),n(i)}).bind(this))})()})}}var Ot=n(0);class Rt{constructor(){throw new Error(\"Unable to Instantiate Scroll\")}static scrolling(t,e){return new Promise(n=>{if(\"fisrt\"===t)this._calcScroll(null),n();else if(\"medium\"===t){const t=e.name,s=e.category;this._calcScroll(t,s),n()}else\"last\"===t&&_.getConnection().then(t=>new c(t).read().then(t=>{if(t.length>0){const e=t.pop();this._calcScroll(e.name,e.category),n()}}))})}static _calcScroll(t,e){if(null==t)window.scroll(0,0);else{Array.prototype.slice.call(a(\".list__items-category h1\")).some(n=>{if(n.textContent===e){return n.parentElement.querySelectorAll(\".list__item-name\").forEach(e=>{if(e.textContent===t){const t=e.offsetTop-25*e.offsetHeight;window.scroll(0,t)}}),!0}})}}}let zt=!1;const Ft=new class{constructor(){this._inputs={name:s(\"#js-input-name\"),qtd:s(\"#js-input-qtd\"),measure:s(\"#js-select-measure\"),unit:s(\"#js-span-unit\"),category:s(\"#js-select-category\"),price:\"00,00\"},this._pageIndex=s(\"#js-page-index\"),this._pageList=s(\"#js-page-list\"),this._pageShopping=s(\"#js-page-shopping\"),this._pageCreateItem=s(\"#js-page-create-item\"),this._recordBox=s(\"#js-record-box\"),this._recordEmpty=s(\"#js-record-empty\"),this._titlePageList=s(\"#title-page-list\"),this._headerSave=s(\"#js-header__save\"),this._titlePageCreateItems=s(\"#js-title-create\"),this._listView=m(),this._itemsView=b(),this._recordView=_t(),this.init()}init(){wt.init(),kt.renderLists(),kt.renderRecord(),tt.listenerModal(),tt.listenerUnitCreateItem(),tt.listenerCustomQtd(),Ot.Menu.selectMenuListiner()}buttonCreateList(t){t.preventDefault(),(async()=>{o.spinner(!0),this._titlePageList.textContent=\"Nova Lista\",await kt.renderItems(!0),o.showHiddenToggle(this._pageIndex,this._pageList),D.fixed(\"list\"),Rt.scrolling(\"fisrt\"),o.spinner(!1)})()}buttonClearRecord(t){t.preventDefault(),S.confirm(\"Deseja excluir todos os registros?\",t=>{1===t&&(_.getConnection().then(t=>new R(t).delete()),this._recordView.update(null),o.showHiddenToggle(this._recordBox,this._recordEmpty))},\"Excluir registros:\",\"Sim\",\"Não\")}buttonOpenCreateItem(t){t.preventDefault(),o.spinner(!0),this._titlePageCreateItems.textContent=\"Criar item\",kt.renderSelect(),o.showHiddenToggle(this._pageCreateItem,this._pageList),o.spinner(!1)}buttonSaveList(t){t.preventDefault(),(async()=>{const t=await _.getConnection().then(t=>new l(t).read());await Nt.openModalNameList(this._titlePageList,t)})()}buttonBackList(t){t.preventDefault(),this._headerSave.classList.contains(\"fade-out\")?(o.showHiddenToggle(this._pageIndex,this._pageList),this._itemsView.update(null)):S.confirm(\"A lista não foi salva. Deseja salvar?:\",e=>{1===e?this.buttonSaveList(t):2===e&&(o.addIsRemove(this._headerSave,\"fade-out\",\"fade-in\"),o.showHiddenToggle(this._pageIndex,this._pageList),this._itemsView.update(null))},\"Lista não salva:\",\"Sim\",\"Não\")}buttonBackCreateItem(t){return t.preventDefault(),new Promise(t=>{(async()=>{\"Editar\"===this._titlePageCreateItems.textContent||(await kt.renderItems(!1),o.showHiddenToggle(this._pageCreateItem,this._pageList),D.fixed(\"list\"),Ut.emptyInputs(),zt&&(await Rt.scrolling(\"last\"),zt=!1)),t()})()})}buttonAddCategory(t){t.preventDefault(),I.add(this._inputs.category)}buttonSaveItem(t){t.preventDefault(),\"Criar item\"===this._titlePageCreateItems.textContent?(async()=>{await Nt.saveItem(this._inputs,\"create\"),zt=!0})():\"Editar item\"===this._titlePageCreateItems.textContent&&(async()=>{const e=await Nt.saveItem(this._inputs,\"edit\");await this.buttonBackCreateItem(t),await Rt.scrolling(\"medium\",e)})()}buttonBackShop(t){t.preventDefault(),o.showHiddenToggle(this._pageIndex,this._pageShopping)}buttonAddShop(t){t.preventDefault(),console.log(\"add\")}buttonFinalizeShop(t){t.preventDefault(),(async()=>{await Q.finalize(),o.showHiddenToggle(this._pageShopping,this._pageIndex)})()}};Object.freeze(Ft);const Bt=Ft;s(\"#js-plus-add-list\").onclick=Bt.buttonCreateList.bind(Bt),s(\"#js-clear-record\").onclick=Bt.buttonClearRecord.bind(Bt),s(\"#js-back-page-list\").onclick=Bt.buttonBackList.bind(Bt),s(\"#js-save-list\").onclick=Bt.buttonSaveList.bind(Bt),s(\"#js-add-item\").onclick=Bt.buttonOpenCreateItem.bind(Bt),s(\"#js-back-page-shopping\").onclick=Bt.buttonBackShop.bind(Bt),s(\"#js-add-item-shop\").onclick=Bt.buttonAddShop.bind(Bt),s(\"#js-finalize-shop\").onclick=Bt.buttonFinalizeShop.bind(Bt),s(\"#js-back-create-item\").onclick=Bt.buttonBackCreateItem.bind(Bt),s(\"#js-save-item\").onsubmit=Bt.buttonSaveItem.bind(Bt),s(\"#js-add-category\").onclick=Bt.buttonAddCategory.bind(Bt)}]);","extractedComments":[]}